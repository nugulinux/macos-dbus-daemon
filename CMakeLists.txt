CMAKE_MINIMUM_REQUIRED(VERSION 3.9)
PROJECT(nugu-dbus-daemon)

MESSAGE("-- Build information:\n")
MESSAGE(" * System: ${CMAKE_SYSTEM_NAME}")
MESSAGE(" * Compiler: ${CMAKE_CXX_COMPILER_ID} ${CMAKE_CXX_COMPILER_VERSION}")
MESSAGE(" * CMAKE_GENERATOR = ${CMAKE_GENERATOR}")
MESSAGE(" * CMAKE_SOURCE_DIR = ${CMAKE_SOURCE_DIR}")
MESSAGE(" * CMAKE_BINARY_DIR = ${CMAKE_BINARY_DIR}")
MESSAGE(" * CMAKE_INSTALL_PREFIX = ${CMAKE_INSTALL_PREFIX}")

SET(PKGNAME "nugu_dbus_daemon")
SET(LABEL "com.sktnugu.${PKGNAME}")

IF(HOMEBREW_PREFIX)
	MESSAGE("HOMEBREW_PREFIX: ${HOMEBREW_PREFIX}")
ELSE()
	SET(HOMEBREW_PREFIX "/opt/homebrew")
ENDIF()

IF(DBUS_PATH)
	MESSAGE("DBUS_PATH: ${DBUS_PATH}")
ELSE()
	SET(DBUS_PATH "${HOMEBREW_PREFIX}/bin")
ENDIF()

SET(SOCKET_PATH "${HOMEBREW_PREFIX}/var/run/${PKGNAME}.sock")
MESSAGE("SOCKET_PATH: ${DBUS_PATH}")

CONFIGURE_FILE(plist.in ${CMAKE_BINARY_DIR}/${LABEL}.plist @ONLY)

FILE(READ ${CMAKE_BINARY_DIR}/${LABEL}.plist DUMP)
MESSAGE("-[ plist ]--------------------------------------------------")
MESSAGE("${DUMP}")
MESSAGE("------------------------------------------------------------")
